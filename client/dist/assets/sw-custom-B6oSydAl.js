self.addEventListener("push",function(o){console.log("Push notification received:",o);let t={title:"Planopia",body:"Masz nowe powiadomienie",icon:"/icon-192x192.png",badge:"/icon-96x96.png",tag:"default",data:{url:"/dashboard"}};if(o.data)try{const i=o.data.json();t={title:i.title||t.title,body:i.body||t.body,icon:i.icon||t.icon,badge:i.badge||t.badge,tag:i.tag||t.tag,data:i.data||t.data,requireInteraction:i.requireInteraction||!1,silent:i.silent||!1}}catch(i){console.error("Error parsing push data:",i)}const n=self.registration.showNotification(t.title,{body:t.body,icon:t.icon,badge:t.badge,tag:t.tag,data:t.data,requireInteraction:t.requireInteraction,silent:t.silent,actions:[{action:"open",title:"Otw√≥rz"},{action:"close",title:"Zamknij"}]});o.waitUntil(n)});self.addEventListener("notificationclick",function(o){var n;if(console.log("Notification clicked:",o),o.notification.close(),o.action==="close")return;const t=((n=o.notification.data)==null?void 0:n.url)||"/dashboard";o.waitUntil(clients.matchAll({type:"window",includeUncontrolled:!0}).then(function(i){for(let a=0;a<i.length;a++){const e=i[a];if(e.url.includes(t)&&"focus"in e)return e.focus()}if(clients.openWindow)return clients.openWindow(t)}))});self.addEventListener("notificationclose",function(o){console.log("Notification closed:",o)});
